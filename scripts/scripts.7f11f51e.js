(function(){"use strict";angular.module("arashike-blog",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngMaterial"]).value("apiEndpoint","https://api.github.com").value("gistUrl","https://gist.github.com").value("authorName","JumpeiArashi").value("gistUsername","JumpeiArashi-blog").config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/top.html",controller:"TopCtrl",controllerAs:"top"}).when("/articles/:gistId",{templateUrl:"views/articledetail.html",controller:"ArticleDetailCtrl",controllerAs:"articleDetail"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("arashike-blog").controller("TopCtrl",["$scope","$q","GithubUserApiService","GithubGistsApiService","authorName","injectGithubApiKey",function(a,b,c,d,e,f){var g;return a.articles=[],a.isLoading=!0,a.error=void 0,a.injectGithubApiKey=f,g=b.all([c(e),d()]),g.then(function(b){return a.articles[0]=b[0].data,a.articles=a.articles.concat(b[1].data)})["catch"](function(b){return a.error=b})["finally"](function(){return a.isLoading=!1})}])}.call(this),function(){"use strict";angular.module("arashike-blog").directive("wintersArticle",[function(){return{restrict:"E",template:'<article layout="column" layout-align="center center">\n  <a ng-href="#/articles/{{wintersArticleElement.id}}">\n    <div class="frame-mint">\n      <div class="frame-inner">\n      {{wintersArticleElement.description}}\n        <div layout="row" layout-align="end">\n          <div class="created-at">{{wintersArticleElement.createdAt | date:\'MMM d, yyyy\'}}</div>\n        </div>\n      </div>\n    </div>\n  </a>\n  <a ng-href="#/articles/{{wintersArticleElement.id}}">\n    <img class="article-icon" ng-src="{{wintersArticleElement.image}}">\n  </a>\n</article>',link:function(a,b,c){var d,e,f,g,h;return h="images/winters/objects/",g=["cave-boy-front.gif","gruff-goat-back.gif","gruff-goat-front.gif","mad-duck-left.gif","mighty-bear-back.gif","mighty-bear-front.gif","hyper-spinning-robo.gif","snow-wood-student.gif","tessie-watcher-front.gif","zombie-processor-front.gif"],f=""+h+g[Math.floor(Math.random()*g.length)],e=JSON.parse(c.gist),d=e.description,d?d.length>30&&(d=""+d.slice(0,25)+"..."):d="No title...",a.wintersArticleElement={id:e.id,image:f,description:d,createdAt:e.created_at}}}}])}.call(this),function(){"use strict";angular.module("arashike-blog").service("GithubUserApiService",["$http","apiEndpoint","setGithubApiKeyToDefaultAuthorizationHeader",function(a,b,c){return c(),function(c){return a.get(""+b+"/users/"+c).then(function(a){return a})["catch"](function(a){throw a})}}])}.call(this),function(){"use strict";angular.module("arashike-blog").service("GithubGistsApiService",["$http","apiEndpoint","gistUsername","setGithubApiKeyToDefaultAuthorizationHeader",function(a,b,c,d){return d(),function(){return a.get(""+b+"/users/"+c+"/gists").then(function(a){return a})["catch"](function(a){throw a})}}])}.call(this),function(){"use strict";angular.module("arashike-blog").directive("loading",function(){return{restrict:"E",template:'<div layout="row" layout-align="center center">\n  <div class="loading">\n    <div class=\'frame-mint\'>\n      <div class=\'frame-inner\'>\n        <div layout="row">\n          <img ng-src="images/electro-eyes.a8f4e358.gif">\n          <div class="text">Loading...</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>',link:function(a,b,c){}}})}.call(this),function(){"use strict";angular.module("arashike-blog").controller("ArticleDetailCtrl",["$scope","$routeParams","gistUrl","gistUsername","githubGistDetailApi","injectGithubApiKey",function(a,b,c,d,e,f){return a.gistUrl=c,a.gistUsername=d,a.gistId=b.gistId,a.gist=void 0,a.isLoading=!0,a.error=void 0,a.injectGithubApiKey=f,e(a.gistId).then(function(b){return a.gist=b.data})["catch"](function(b){return a.error=b})["finally"](function(){return a.isLoading=!1})}])}.call(this),function(){"use strict";angular.module("arashike-blog").service("githubGistDetailApi",["$http","apiEndpoint","setGithubApiKeyToDefaultAuthorizationHeader",function(a,b,c){var d;return d={},c(),function(c){return a.get(""+b+"/gists/"+c).then(function(c){var e,f,g;return d=c.data,f=Object.keys(d.files),e=d.files[f[0]].content,g={method:"POST",url:""+b+"/markdown",data:{text:e}},a(g)}).then(function(a){return d.htmlContent=a.data,a.data=d,a})["catch"](function(a){throw a})}}])}.call(this),function(){"use strict";angular.module("arashike-blog").directive("error",function(){return{restrict:"E",template:"<div layout='row' layout-align='center center'>\n  <div class='error'>\n    <div class='frame-strawberry'>\n      <div class='frame-inner'>\n          <div layout='row'>\n            <div>\n              <img ng-src='images/geppuu.ac80fbcc.gif'>\n            </div>\n            <div clsss='message' layout='column'>\n              <h3 class='title'>Backend API Error</h3>\n              <div class='text'>{{error.data.message}}</div>\n              <div class='text'>This error will be resolved by inputting Github API Key. Can you input??</div>\n              <form class='github-personal-token' ng-submit='injectGithubApiKey(githubApiKey)'>\n                <input class='github-api-key' ng-model='githubApiKey' type='text' placeholder='Github API Token'>\n                <input class='submit' type='submit' value='Submit!!'>\n              </form>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n</div>",link:function(a,b,c){}}})}.call(this),function(){"use strict";angular.module("arashike-blog").service("injectGithubApiKey",["$window","$cookies",function(a,b){return function(c){return b.put("github_api_key",c),a.location.reload()}}])}.call(this),function(){"use strict";angular.module("arashike-blog").service("setGithubApiKeyToDefaultAuthorizationHeader",["$http","$cookies",function(a,b){return function(){var c;return c=b.get("github_api_key"),c?a.defaults.headers.common.Authorization="token "+c:void 0}}])}.call(this),angular.module("arashike-blog").run(["$templateCache",function(a){"use strict";a.put("views/articledetail.html",'<div class="winters"> <div layout-padding ng-class="{\'detail\': !isLoading && !error}"> <loading ng-if="isLoading"></loading> <error ng-if="error"></error> <div layout="row"> <div flex-lg="10" flex-gt-lg="20"></div> <div flex-lg="80" flex-gt-lg="60" ng-bind-html="gist.htmlContent"></div> <div flex-lg="10" flex-gt-lg="20"></div> </div> <div ng-if="!isLoading" class="comment" layout="row"> <div flex-lg="10" flex-gt-lg="20"></div> <div flex-lg="80" flex-gt-lg="60"> <a class="direct-gist-link" ng-href="{{gistUrl}}/{{gistUsername}}/{{gistId}}">コメントする</a> <span>(すいません、今のところ直接gistでのコメントです。)</span> </div> <div flex-lg="10" flex-gt-lg="20"></div> </div> </div> </div>'),a.put("views/footer.html",'<div class="winters"> <footer> <div> <div class="credit" layout="row" layout-align="end end"> <div class="credit-text">Powered by JumpeiArashi</div> <img class="credit-image" ng-src="../images/winters/tessie.9fbb8e8a.gif"> </div> </div> </footer> </div>'),a.put("views/header.html",'<div class="winters"> <header> <div class="title-wrapper"> <div class="title">blog.arashike.com</div> <img ng-src="../images/header/ufo.f0e5f9b6.gif"> </div> </header> </div>'),a.put("views/top.html",'<div class="winters"> <div layout-padding class="articles"> <md-grid-list ng-show="!isLoading && !error" md-cols-sm="2" md-cols-gt-sm="4" md-cols-gt-md="8" md-cols-gt-lg="12" md-row-height-sm="6:7" md-row-height-gt-sm="7:8" md-row-height-gt-md="7:11" md-row-height-gt-lg="7:10"> <md-grid-tile ng-repeat="article in articles"> <div ng-show="$first"> <div class="author-wrapper"> <a ng-href="{{article.html_url}}" class="author" layout="row" layout-align="center start"> <div layout="column"> <div class="author-prefix">I\'m</div> <div class="author-name">{{article.login}}</div> </div> <img lay class="author-image" ng-src="{{article.avatar_url}}}"> </a> </div> </div> <div ng-show="!$first"> <winters-article gist="{{article}}"></winters-article> </div> </md-grid-tile> </md-grid-list> <loading ng-if="isLoading"></loading> <error ng-if="error"></error> </div> </div>')}]);